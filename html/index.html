<!DOCTYPE html>
<html>
<head>
    <title>TWSG Lobby</title>
</head>

<body>
	
    <form id = "Lobby">
    	<h1>TWSG Lobby</h1>
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" placeholder="Enter your username">
        <input type="button" id="enter_Game" name="Join" onclick=join() value="Join">
        
        <br><br>
        <div id = "Game states" style="display: none;">
		    <label for="game-type" >Select Game Type:</label>
		    <input type="radio" id="game-type-2" name="game-type" value="2 Players">
		    <label for="game-type-2">2 Players</label>
		    <input type="radio" id="game-type-3" name="game-type" value="3 Players">
		    <label for="game-type-3">3 Players</label>
		    <input type="radio" id="game-type-4" name="game-type" value="4 Players">
		    <label for="game-type-4">4 Players</label>
        
        
        <br><br>
         
        <label for="ready">Select status:</label>
        <input type="radio" id="ready" name="game-status" value="ready">     
        <label for="ready">Ready to play!</label>
        

        <input type="radio" id="not_ready" name="game-status" value="not_ready">            
        <label for="not_ready">Not ready to play yet!</label>
        </div>
        <br><br>
             
        <div id="waiting-area-2">
            <h2>Waiting for 2 players</h2>
            <label id="2_player_game"></label>
        </div>
        <br><br>
        
        <div id="waiting-area-3">
            <h2>Waiting for 3 players</h2>
			<label id="3_player_game"></label>
        </div>
        <br><br>
        
        <div id="waiting-area-4">
            <h2>Waiting for 4 players</h2>
			<label id="4_player_game"></label>
        </div>
        <br><br>

        <h2>Leaderboard</h2>
        <table>
            <tr>
                <th>Username</th>
                <th>Points</th>
            </tr>
        </table>
        
        <br>
        
        <h2>Chat</h2>
        <input type="text" id="chat-input" name="chat-input" placeholder="Enter your message">
        <button type="button" id="chat-send">Send</button>
        <div id="chat-messages">
            <table>
            </table>
        </div>
    </form>
    
    <div id = "Game_interface" style="display: none;">
    	<h1>Game<h1>
    	<table id="Grid">
    	
    	</table>
    </div>
</body>
</html>

<script>
	var connection = new Websocket("ws://" + window.location.hostname + ":9122");
	var serverUrl;
	serverUrl = "ws://" + window.location.hostname + ":9122";

	connection.onopen = function (evt) {
	    console.log("open");
	}
	connection.onclose = function (evt) {
	    console.log("close");
	    document.getElementById("topMessage").innerHTML = "Server Offline"
	}
		
	function join() {
		var username = document.getElementById("username").value;
		if(username.trim() !== "") {
		    // Show the hidden buttons
		    document.getElementById("Game states").style.display = "inline-block";
		} else {
		    alert("Please enter a username before joining.");
		}
	}
	
</script>

<script>	
	var form = document.getElementById("Lobby");
	var number = 1;
	
	for (var i = 1; i <= 50; i++) 
	{
		var row = buttonTable.insertRow();
		for (var j = 1; j <= 50; j++)
		{
			var cell = row.insertCell();
			var button = document.createElement("button");
			button.textContent = "?";
			button.id = number;
			
		    button.style.border = "none";
		    button.style.backgroundColor = "transparent";
		    button.style.boxShadow = "none";
		    //button.style.padding = "0";
		    button.style.margin = "0";
		    button.style.outline = "none";
		    button.style.cursor = "pointer";
		    //button.style.width = "30px";
		    //button.style.height = "30px";
		    button.style.fontSize = "10px";
		    button.style.lineHeight = "0";
		    
			cell.appendChild(button);	
			number+=1;	
		}
		

	}

</script>

<script>

	var no_clicks = 0;
	var selected_letters = [];

	function button_click(row, column) 
	{
		selected_letters.push({ row: row, column: column });
		no_clicks += 1;
		
		if (no_clicks % 2 === 0) 
		{
		    var selected_word = isValidOrientation(selected_letters[selected_letters.length - 2], selected_letters[selected_letters.length - 1]);
		    
		    if (selected_word.length !== 0) 
		    {
		        connection.send(JSON.stringify(selected_word));
		    } 
		    
		    else 
		    {
		        selected_letters = [];
		    }
		}
	}
	
	function isValidOrientation(letter1, letter2) 
	{
		var selected_word = [];
		const rowDiff = Math.abs(letter1.row - letter2.row);
		const colDiff = Math.abs(letter1.column - letter2.column);

		if (letter1.column === letter2.column) 
		{
		    // Vertical orientation
		    for (var i = Math.min(letter1.row, letter2.row); i <= Math.max(letter1.row, letter2.row); i++) 
		    {
		        selected_word.push(grid[i][letter1.column]);
		    }
		    return selected_word;
		} 
		
		else if (letter1.row === letter2.row) 
		{
		    // Horizontal orientation
		    for (var i = Math.min(letter1.column, letter2.column); i <= Math.max(letter1.column, letter2.column); i++) 
		    {
		        selected_word.push(grid[letter1.row][i]);
		    }
		    
		    return selected_word;
		} 
		
		else if (rowDiff === colDiff) 
		{
		    // Diagonal orientation
		    var rowStart = Math.min(letter1.row, letter2.row);
		    var colStart = Math.min(letter1.column, letter2.column);
		    var rowEnd = Math.max(letter1.row, letter2.row);
		    var colEnd = Math.max(letter1.column, letter2.column);
		    
		    // Traverse the diagonal
		    for (var row = rowStart, col = colStart; row <= rowEnd && col <= colEnd; row++, col++) 
		    {
		        selected_word.push(grid[row][col]);
		    }
		    return selected_word;
		} 
		else 
		{
		    return []; // Invalid orientation
		}
	}









</script>







